

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Pereval
---

–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ **Pereval** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ REST API, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **FastAPI**.   
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∞—Ç—å, —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–º–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≥–æ—Ä–Ω—ã—Ö –ø–µ—Ä–µ–≤–∞–ª–æ–≤.  


---

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](#–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è-api)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫-—á–µ—Ä–µ–∑-docker-compose)
- [–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤](#–ø—Ä–∏–º–µ—Ä—ã-–∑–∞–ø—Ä–æ—Å–æ–≤)
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [–ö–æ–Ω—Ç–∞–∫—Ç—ã](#–∫–æ–Ω—Ç–∞–∫—Ç—ã)



---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:

- python:3.11
- pip
- **Docker (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é)**
- **PostgreSQL

### –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –≤ –∫–æ—Ä–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–∑–¥–∞–∏—Ç–µ —Ñ–∞–∏–ª .env —Å –ø—Ä–µ–º–µ–Ω–Ω—ã–º–∏ 
FSTR_DB_HOST=127.0.0.1 (–µ—Å–ª–∏ –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–∏ –¥–æ–∫–µ—Ä –æ–±—Ä–∞–∑ —Ç–æ FSTR_DB_HOST=db)
FSTR_DB_PORT=5432
FSTR_DB_LOGIN=
FSTR_DB_PASS=
FSTR_DB_NAME=
- –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏  
alembic upgrade head

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
## –ó–∞–ø—É—Å–∫
src/main.py

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É http://45.143.92.70:8010/api/openapi#/
- OpenAPI JSON http://45.143.92.70:8010/openapi.json
- OpenAPI YAML: –°–∫–∞—á–∞–π—Ç–µ —Ñ–∞–π–ª openapi.yaml, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker –∏ Docker Compose
–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
Docker
Docker Compose (–æ–±—ã—á–Ω–æ –∏–¥–µ—Ç –≤ –∫–æ–º–ø–ª–µ–∫—Ç–µ —Å Docker)

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Docker –∏ Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—ã:
docker --version
docker compose version  -- –î–ª—è –Ω–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
docker-compose --version  -- –î–ª—è —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏
-  –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ø–æ–º–æ—â—å—é:

docker compose up -d  
–§–ª–∞–≥ -d –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.  
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:  
docker compose up --build -d  
–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:  
docker ps  
- –µ—Å–ª–∏ –ø—Ä–æ–≤–æ–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–∞ —Ö–æ—Å—Ç–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–∏ –æ–±—Ä–∞–∑
–¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å docker-compose-yaml –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –≤–∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
–ø–æ–º–µ—Å—Ç–∏—Ç—å –≤–Ω—É—Ç—Ä—å —Ñ–∞–∏–ª–∞  
### üìå Docker Compose –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```yaml
services:  
  db:  
    image: postgres:15  
    container_name: db  
    restart: always  
    environment:  
      POSTGRES_USER: ${FSTR_DB_LOGIN}  
      POSTGRES_PASSWORD: ${FSTR_DB_PASS}  
      POSTGRES_DB: ${FSTR_DB_NAME}  
    volumes:  
      - postgres_data:/var/lib/postgresql/data  
    ports:   
      - "${FSTR_DB_PORT}:5432"  
    networks:  
      - app_network  

  app:  
    image: izorginpasha/pereval-app:latest  
    container_name: pereval  
    restart: always  
    depends_on:  
      - db  
    environment:  
      DATABASE_URL: postgresql://${FSTR_DB_LOGIN}:${FSTR_DB_PASS}@db:${FSTR_DB_PORT}/${FSTR_DB_NAME}         
    ports:  
      - "8010:8010"  
    networks:  
      - app_network  

networks:  
  app_network:  
    driver: bridge 
```

–¥–∞–ª–µ–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–∏ —à–∞–≥, –µ—â–µ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–∏–Ω–µ—Ä–æ–≤ –≤ –∫–æ–Ω—Ç–µ–∏–Ω–µ—Ä–µ db  
–≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–±—Ä–æ—Å –º–∏–≥—Ä–∞—Ü–∏–∏   
  
docker compose exec db psql -U my_user -d my_database -c "DROP TABLE IF EXISTS alembic_version;"  
docker compose exec db bash  
alembic stamp head  
alembic revision --autogenerate -m "Initial migration"  
alembic upgrade head  


### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
#### curl -X 'GET' \
  'http://45.143.92.70:8010/submitData/6' \
  -H 'accept: application/json'  
  
#### üìå –ü—Ä–∏–º–µ—Ä JSON-–æ—Ç–≤–µ—Ç–∞ API

```json
{
  "id": 6,
  "date_added": "2025-02-23T09:49:03.600213",
  "beautyTitle": "string",
  "title": "string",
  "other_titles": "string",
  "connect": "string",
  "add_time": "2025-02-22T09:16:06.480000",
  "status": "new",
  "user": {
    "email": "user@example.com",
    "fam": "string",
    "name": "string",
    "otc": "string",
    "phone": "string"
  },
  "coords": {
    "latitude": 0,
    "longitude": 0,
    "height": 0
  },
  "level": {
    "level_winter": "string",
    "level_summer": "string",
    "level_autumn": "string",
    "level_spring": "string"
  },
  "images": [
    {
      "data": "https://s9.travelask.ru/uploads/post/000/028/766/main_image/facebook-3703d50448b0b279bd310d3d2ce9f03d.jpg"
    }
  ]
}
```
–¥–∞–Ω–Ω—ã–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–µ—Ä–µ–≤–∞–ª–µ –ø–æ –µ–≥–æ id  

#### –í–∏–¥—ã –∑–∞–ø—Ä–æ—Å–æ–≤
- GET http://45.143.92.70:8010/submitData/<id> –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø–µ—Ä–µ–≤–∞–ª–µ 
- GET http://45.143.92.70:8010/submitData/<email> –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö –ø–µ—Ä–µ–≤–∞–ª–∞—Ö 
–¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å –¥–∞–Ω–Ω—ã–º email
- POST http://45.143.92.70:8010/submitData/ –¥–ª—è –æ—Ç–ø–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –æ –Ω–æ–≤–æ–º –ø–µ—Ä–µ–≤–∞–ª–µ
- POST http://45.143.92.70:8010/submitData/<id> –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–µ—Ä–µ–≤–∞–ª–µ  
–ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ —Å—Å—ã–ª–∫–µ http://45.143.92.70:8010/api/openapi#/

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –∏ –ª–µ–≥–∫–æ–µ
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ FastAPI –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ API —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π.  

‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
–ë–ª–∞–≥–æ–¥–∞—Ä—è async/await –≤ Python API —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞. –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö, —Å–µ—Ç–µ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏.

‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è OpenAPI (Swagger UI –∏ ReDoc) –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é API.

‚úÖ –£–¥–æ–±–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–º–æ–≥–∞—é—Ç –±—ã—Å—Ç—Ä–æ –≤—ã—è–≤–ª—è—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏ –≤–≤–æ–¥–∞, –∞ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø–æ–∑–≤–æ–ª—è—é—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã.

‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
FastAPI –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–≤—è–∑–∫–µ —Å Uvicorn (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º), –∞ —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Gunicorn, Docker, NGINX –∏ CI/CD –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

### –ö–æ–Ω—Ç–∞–∫—Ç—ã

Email: izorgin.pasha@yandex.ru
GitHub: github.com/izorginpasha
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É http://45.143.92.70:8010